[gd_scene load_steps=24 format=3 uid="uid://bjipm2lc5skd"]

[ext_resource type="Texture2D" uid="uid://beqs7lmdt8ajs" path="res://physics_enemy_sheet.png" id="1_0xm2m"]
[ext_resource type="Script" uid="uid://bf13qo63osdwl" path="res://timer_display.gd" id="2_7mycd"]
[ext_resource type="Script" uid="uid://boa1tjceghcpe" path="res://player.gd" id="2_h2yge"]
[ext_resource type="Script" uid="uid://crmnujf6i6tcn" path="res://player_healthbar.gd" id="3_272bh"]
[ext_resource type="SpriteFrames" uid="uid://cdtg4lurljt3d" path="res://player_anims.tres" id="3_h2yge"]
[ext_resource type="Script" uid="uid://bywkkfhw0eih0" path="res://time_manager.gd" id="4_1bvp3"]
[ext_resource type="Script" uid="uid://x101j7iv5bmf" path="res://physics_enemy.gd" id="4_272bh"]
[ext_resource type="Script" uid="uid://bhaai2o87q120" path="res://enemy_healthbar.gd" id="5_5vw27"]

[sub_resource type="SystemFont" id="SystemFont_5vw27"]
subpixel_positioning = 0

[sub_resource type="SystemFont" id="SystemFont_kek77"]
subpixel_positioning = 0

[sub_resource type="Environment" id="Environment_7dm0k"]
background_mode = 4

[sub_resource type="BoxMesh" id="BoxMesh_5vw27"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_kek77"]
height = 0.2
radius = 0.4

[sub_resource type="CylinderShape3D" id="CylinderShape3D_5vw27"]
height = 0.2
radius = 0.45

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_4c57u"]
radius = 0.28955078
height = 1.1409912

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_kek77"]
radius = 0.37353516
height = 1.1289673

[sub_resource type="BoxShape3D" id="BoxShape3D_7mycd"]

[sub_resource type="BoxMesh" id="BoxMesh_272bh"]

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_7mycd"]

[sub_resource type="Gradient" id="Gradient_1bvp3"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_lquwl"]
gradient = SubResource("Gradient_1bvp3")
fill_to = Vector2(0.0625, 0)
repeat = 1
metadata/_snap_enabled = true
metadata/_snap_count = 16

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7mycd"]
albedo_texture = SubResource("GradientTexture2D_lquwl")

[sub_resource type="PlaneMesh" id="PlaneMesh_272bh"]
material = SubResource("StandardMaterial3D_7mycd")
size = Vector2(50, 50)

[node name="Node3D" type="Node3D"]

[node name="time manager" type="Node" parent="." node_paths=PackedStringArray("timer_label")]
unique_name_in_owner = true
script = ExtResource("4_1bvp3")
timer_label = NodePath("../CanvasLayer/timer")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="timer" type="Node2D" parent="CanvasLayer"]
script = ExtResource("2_7mycd")
font = SubResource("SystemFont_5vw27")
colour1 = Color(1, 1, 1, 1)
colour2 = Color(1, 0.6313726, 0, 1)
colour3 = Color(1, 0, 0, 1)

[node name="player_healthbar" type="Node2D" parent="CanvasLayer"]
script = ExtResource("3_272bh")
font = SubResource("SystemFont_kek77")
colour = Color(0.7670247, 2.5268644e-06, 9.62615e-07, 1)
flash_colour = Color(0.9506034, 0.29980722, 0.23307866, 1)

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.70710677, -0.35355338, 0.6123724, 0, 0.8660254, 0.5, -0.70710677, -0.35355338, 0.6123724, 24.495, 20, 24.495)
environment = SubResource("Environment_7dm0k")
projection = 1
size = 8.0

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.65076095, 0.75928265, 0, -0.75928265, 0.65076095, 0, 1.5492883, 0)
shadow_enabled = true

[node name="MeshInstance3D2" type="MeshInstance3D" parent="."]
mesh = SubResource("BoxMesh_5vw27")

[node name="physics_enemy" type="RigidBody3D" parent="." node_paths=PackedStringArray("player")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.0628732, 0.5889671, -0.02810359)
script = ExtResource("4_272bh")
player = NodePath("../player")

[node name="CollisionShape3D" type="CollisionShape3D" parent="physics_enemy"]
shape = SubResource("CylinderShape3D_kek77")

[node name="physics enemy visuals" type="Sprite3D" parent="physics_enemy"]
transform = Transform3D(0.70710677, -1.4142135, -3.090862e-08, 0, -8.742278e-08, 1, -0.70710677, -1.4142135, -3.090862e-08, 0, 0, 0)
pixel_size = 0.0313
alpha_cut = 1
texture_filter = 0
texture = ExtResource("1_0xm2m")
hframes = 16
vframes = 8

[node name="CanvasLayer" type="CanvasLayer" parent="physics_enemy"]

[node name="healthbar" type="Node2D" parent="physics_enemy/CanvasLayer"]
position = Vector2(0, -20)
scale = Vector2(0.70710677, 1.4142135)
skew = 1.5707964
script = ExtResource("5_5vw27")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="physics_enemy"]

[node name="Area3D" type="Area3D" parent="physics_enemy"]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="physics_enemy/Area3D"]
shape = SubResource("CylinderShape3D_5vw27")

[node name="player" type="CharacterBody3D" parent="." node_paths=PackedStringArray("healthbar")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.2886999, 0, -1.1542073)
script = ExtResource("2_h2yge")
healthbar = NodePath("../CanvasLayer/player_healthbar")

[node name="CollisionShape3D" type="CollisionShape3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5803833, 0)
shape = SubResource("CapsuleShape3D_4c57u")

[node name="AnimatedSprite3D" type="AnimatedSprite3D" parent="player"]
transform = Transform3D(0.70710677, 0, 0.70710677, 0, 1.155, 0, -0.70710677, 0, 0.70710677, 0, 0.547, 0)
pixel_size = 0.0313
double_sided = false
alpha_cut = 1
texture_filter = 0
sprite_frames = ExtResource("3_h2yge")
animation = &"runningRF"
autoplay = "runningRF"

[node name="weapon_attachment" type="Node3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.624969, 0)

[node name="Area3D" type="Area3D" parent="player"]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="player/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.58096313, 0)
shape = SubResource("CapsuleShape3D_kek77")

[node name="cube" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5213611, -1.6070688)

[node name="CollisionShape3D" type="CollisionShape3D" parent="cube"]
shape = SubResource("BoxShape3D_7mycd")

[node name="MeshInstance3D" type="MeshInstance3D" parent="cube"]
mesh = SubResource("BoxMesh_272bh")

[node name="cube2" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.81429255, 0.5213611, -2.5040321)

[node name="CollisionShape3D" type="CollisionShape3D" parent="cube2"]
shape = SubResource("BoxShape3D_7mycd")

[node name="MeshInstance3D" type="MeshInstance3D" parent="cube2"]
mesh = SubResource("BoxMesh_272bh")

[node name="ground temp" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="ground temp"]
shape = SubResource("WorldBoundaryShape3D_7mycd")

[node name="MeshInstance3D" type="MeshInstance3D" parent="ground temp"]
mesh = SubResource("PlaneMesh_272bh")
skeleton = NodePath("../..")

[connection signal="area_entered" from="physics_enemy/Area3D" to="physics_enemy" method="_on_hitbox_area_entered"]
